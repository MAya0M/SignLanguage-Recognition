# עלויות AWS - חישוב מלא לפרויקט

## שאלה: האם IAM User עולה כסף?

### תשובה: **לא! IAM User חינמי לחלוטין!**

IAM User זה רק דרך לניהול permissions - **לא עולה כסף**.

---

## על מה משלמים ב-AWS?

### 1. EC2 Instances (העלות העיקרית)

**מה זה**: המחשב הוירטואלי עם GPU לאימון

**עלויות:**

| Instance Type | On-Demand/שעה | Spot/שעה | תיאור |
|--------------|---------------|----------|--------|
| **g4dn.xlarge** | $0.50 | ~$0.05 | מומלץ - מספיק לרוב |
| **g4dn.2xlarge** | $0.75 | ~$0.08 | יותר כוח |
| **g5.xlarge** | $1.00 | ~$0.10 | GPU חדש יותר |

**חשוב**: משלמים רק על הזמן שה-instance רץ!

### 2. S3 Storage (זניח)

**מה זה**: אחסון קבצים (נתונים, מודלים)

**עלויות:**
- **Storage**: ~$0.023/GB/חודש
- **Data Transfer IN**: חינם (העלאה)
- **Data Transfer OUT**: חינם עד 100GB/חודש (אז $0.09/GB)

**דוגמה לפרויקט שלך:**
- נתונים: ~500MB-2GB
- מודלים: ~50-200MB
- **סה"כ**: ~$0.05-0.10/חודש (זניח!)

### 3. שירותים אחרים (חינם בדרך כלל)

- **IAM Users**: חינם ✅
- **S3 Requests**: חינם עד מיליון requests/חודש
- **EC2 Metadata**: חינם
- **CloudWatch (ניטור)**: חינם עד 10 metrics

---

## חישוב עלויות - פרויקט שלך

### תרחיש: אימון של 4 שעות

#### עם On-Demand (מחיר רגיל):

| Instance | מחיר/שעה | 4 שעות | חודש (אם תשאיר רץ) |
|----------|-----------|--------|---------------------|
| g4dn.xlarge | $0.50 | **$2.00** | $360 |
| g4dn.2xlarge | $0.75 | **$3.00** | $540 |
| g5.xlarge | $1.00 | **$4.00** | $720 |

#### עם Spot Instances (מומלץ!):

| Instance | מחיר/שעה | 4 שעות | חיסכון |
|----------|-----------|--------|--------|
| g4dn.xlarge | $0.05 | **$0.20** | 90% |
| g4dn.2xlarge | $0.08 | **$0.32** | 89% |
| g5.xlarge | $0.10 | **$0.40** | 90% |

### עלויות נוספות:

- **S3 Storage**: ~$0.05-0.10/חודש (זניח)
- **Data Transfer**: חינם (בתוך region)
- **IAM**: חינם ✅

---

## הערכת עלויות - פרויקט מלא

### תרחיש 1: אימון אחד (4 שעות)

**עם Spot Instances:**
- EC2: $0.20-0.40
- S3: $0.01 (זניח)
- **סה"כ: $0.21-0.41** 💰

**עם On-Demand:**
- EC2: $2.00-4.00
- S3: $0.01
- **סה"כ: $2.01-4.01**

### תרחיש 2: מספר אימונים (10 שעות)

**עם Spot:**
- EC2: $0.50-1.00
- S3: $0.05
- **סה"כ: $0.55-1.05**

**עם On-Demand:**
- EC2: $5.00-10.00
- S3: $0.05
- **סה"כ: $5.05-10.05**

### תרחיש 3: חודש שלם (אם תשאיר instance רץ)

**⚠️ אזהרה: זה יקר!**

- EC2: $360-720/חודש
- S3: $0.10
- **סה"כ: $360-720/חודש**

**חשוב מאוד**: כבה את ה-instance כשסיימת!

---

## איך לחסוך כסף?

### 1. Spot Instances (חיסכון 90%!)

**איך:**
- ב-Launch Instance → סמן "Request Spot Instances"
- בחר "On-demand price" (בטוח) או 70% מהמחיר

**חיסכון**: $0.20 במקום $2.00 לאימון!

### 2. כבה Instance מיד

**איך:**
- EC2 Console → Instances → Stop/Terminate

**חיסכון**: לא משלמים כשלא רץ!

### 3. השתמש ב-Instance הקטן ביותר

**איך:**
- התחל עם `g4dn.xlarge`
- אם מספיק - מעולה!
- אם לא - שדרג ל-`g4dn.2xlarge`

**חיסכון**: $0.25/שעה

### 4. שמור מודלים ב-S3

**איך:**
- שמור מודלים ל-S3
- כבה instance
- הורד כשצריך

**חיסכון**: לא משלמים על instance שלא רץ

---

## דוגמאות עלויות אמיתיות

### פרויקט קטן (אימון אחד):

```
1. חילוץ keypoints (מקומי): $0
2. יצירת dataset (מקומי): $0
3. העלאת נתונים ל-S3: $0 (חינם)
4. EC2 instance (Spot, 4 שעות): $0.20
5. S3 storage (חודש): $0.05
6. הורדת מודל: $0 (חינם)

סה"כ: $0.25
```

### פרויקט בינוני (מספר אימונים):

```
1. הכנה (מקומי): $0
2. EC2 (Spot, 10 שעות): $0.50
3. S3 (חודש): $0.10
4. ניסויים שונים: $1.00

סה"כ: ~$1.60
```

### פרויקט גדול (אימון מקצועי):

```
1. הכנה: $0
2. EC2 (Spot, 20 שעות): $1.00
3. S3 (חודש): $0.20
4. ניסויים: $2.00

סה"כ: ~$3.20
```

---

## עלויות לפי שלבים

### שלב 1: הכנה (מקומי)
- **עלות: $0** ✅
- חילוץ keypoints, יצירת dataset

### שלב 2: העלאת נתונים
- **עלות: $0** ✅
- העלאה ל-S3 חינם

### שלב 3: אימון (EC2)
- **עלות: $0.20-4.00** (תלוי ב-instance ו-Spot)
- זה העלות העיקרית!

### שלב 4: אחסון (S3)
- **עלות: $0.05-0.10/חודש** (זניח)
- אחסון נתונים ומודלים

### שלב 5: הורדה
- **עלות: $0** ✅
- הורדה מ-S3 חינם (עד 100GB/חודש)

---

## טבלת עלויות מהירה

| פעולה | עלות | הערות |
|-------|------|-------|
| IAM User | **$0** | חינם! |
| S3 Bucket | **$0** | חינם (רק storage עולה) |
| העלאת נתונים | **$0** | חינם |
| EC2 (Spot, 4 שעות) | **$0.20** | g4dn.xlarge |
| EC2 (On-Demand, 4 שעות) | **$2.00** | g4dn.xlarge |
| S3 Storage (500MB) | **$0.01/חודש** | זניח |
| הורדת מודל | **$0** | חינם |

---

## תקציב מומלץ

### לפרויקט אישי:

**תקציב מינימלי: $1-5**
- Spot Instances
- אימון אחד או שניים
- S3 storage

**תקציב נוח: $5-10**
- Spot Instances
- מספר אימונים
- ניסויים שונים

**תקציב מקצועי: $10-20**
- On-Demand (אם צריך)
- אימונים רבים
- ניסויים

---

## אזהרות חשובות

### 1. תמיד כבה Instance!

**אם תשאיר instance רץ:**
- $360-720/חודש!
- זה הרבה כסף!

**פתרון:**
- הגדר billing alerts
- תמיד תזכור לכבות
- בדוק Cost Explorer

### 2. Spot Instances יכולים להיפסק

**אבל:**
- המודל שומר checkpoints
- פשוט הפעל מחדש והמשך
- החיסכון שווה את זה!

### 3. Data Transfer OUT

**חינם עד 100GB/חודש**
- לפרויקט שלך זה מספיק בהחלט
- אחרי זה: $0.09/GB

---

## איך לבדוק עלויות?

### דרך AWS Console:

1. **Cost Explorer**:
   - Billing → Cost Explorer
   - ראה עלויות לפי זמן, שירות, וכו'

2. **Bills**:
   - Billing → Bills
   - ראה חשבוניות מפורטות

3. **Billing Dashboard**:
   - Billing → Dashboard
   - ראה סיכום עלויות

### דרך CLI:

```bash
# בדוק עלויות (דורש Cost Explorer API)
aws ce get-cost-and-usage ...
```

---

## הגדרת Billing Alerts

**חשוב מאוד!** תדע אם אתה משלם יותר מדי.

### איך להגדיר:

1. **AWS Console → Billing → Preferences**
2. **Billing alerts → Create alert**
3. **מלא:**
   - **Alert threshold**: $10 (או סכום אחר)
   - **Email**: כתובת שלך
4. **Create alert**

**תקבל email** אם העלויות עוברות את הסף!

---

## סיכום עלויות

### לפרויקט שלך:

**עלות מינימלית (Spot):**
- אימון אחד (4 שעות): **$0.20-0.40**
- S3: **$0.05/חודש**
- **סה"כ: ~$0.25-0.45** 💰

**עלות ממוצעת (Spot):**
- מספר אימונים: **$1-3**
- S3: **$0.10/חודש**
- **סה"כ: ~$1-3**

**עלות מקסימלית (On-Demand):**
- אימון אחד: **$2-4**
- מספר אימונים: **$5-10**
- **סה"כ: ~$2-10**

### מה לא עולה כסף:

✅ IAM Users  
✅ S3 Buckets (רק storage)  
✅ העלאת נתונים  
✅ הורדת נתונים (עד 100GB)  
✅ EC2 Metadata  
✅ CloudWatch (בסיסי)  

---

## המלצות

1. **השתמש ב-Spot Instances** - חיסכון 90%!
2. **כבה instance מיד** - כשסיימת
3. **הגדר billing alerts** - תדע אם זה יקר
4. **בדוק Cost Explorer** - עקוב אחר עלויות
5. **התחל קטן** - g4dn.xlarge מספיק לרוב

---

## דוגמה: פרויקט מלא

```
יום 1: הכנה
- חילוץ keypoints: $0
- יצירת dataset: $0
- העלאת נתונים: $0

יום 2: אימון
- EC2 (Spot, 4 שעות): $0.20
- S3 storage: $0.01

יום 3: שיפור
- EC2 (Spot, 2 שעות): $0.10

סה"כ: $0.31
```

**פחות מ-50 סנט לפרויקט מלא!** 🎉

---

## שאלות נפוצות

**Q: IAM User עולה כסף?**  
A: לא! חינם לחלוטין.

**Q: כמה יעלה הפרויקט?**  
A: עם Spot: $0.20-3. עם On-Demand: $2-10.

**Q: מה העלות הכי נמוכה?**  
A: Spot Instances + כיבוי מיד = $0.20-0.40 לאימון.

**Q: מה אם אשכח לכבות?**  
A: הגדר billing alerts! תדע מיד.

**Q: כמה עולה S3?**  
A: זניח - $0.05-0.10/חודש לפרויקט שלך.

---

## סיכום

**IAM User: חינם!** ✅

**עלות הפרויקט:**
- **מינימום**: $0.25 (Spot, אימון אחד)
- **ממוצע**: $1-3 (Spot, מספר אימונים)
- **מקסימום**: $2-10 (On-Demand)

**עם Spot Instances: הפרויקט יכול לעלות פחות מדולר!** 💰

---

**בהצלחה! 🚀**

