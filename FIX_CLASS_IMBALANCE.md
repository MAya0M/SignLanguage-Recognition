# 🔧 תיקון בעיית Class Imbalance - המודל מזהה רק HELLO

## 🔴 הבעיה

המודל מזהה בעיקר "HELLO" על כל המילים. זה סימן קלאסי ל-**Class Imbalance**:
- יש יותר סרטונים של HELLO מאשר מילים אחרות
- המודל "לומד" שהכי בטוח לנחש HELLO
- המודל לא לומד את ההבדלים בין המילים

---

## ✅ מה תוקן

### 1. **הוספת Class Weights** ⭐
- המודל עכשיו נותן יותר משקל למילים עם פחות סרטונים
- זה מאלץ את המודל ללמוד גם את המילים הפחות נפוצות
- **קובץ**: `scripts/train_model.py`

### 2. **סקריפט לניתוח נתונים** ⭐
- סקריפט חדש לבדיקת התפלגות הנתונים
- מזהה חוסר איזון ומציע פתרונות
- **קובץ**: `scripts/analyze_dataset.py`

---

## 📋 מה צריך לעשות עכשיו

### **שלב 1: לבדוק את התפלגות הנתונים** ⚠️ **חשוב**

להריץ את הסקריפט החדש:

```bash
python scripts/analyze_dataset.py
```

זה יראה:
- כמה סרטונים יש לכל מילה
- איזה מילה הכי נפוצה (כנראה HELLO)
- מה היחס בין המילים (imbalance ratio)

**אם יש חוסר איזון חמור** (יחס > 2.0), צריך:
1. להוסיף עוד סרטונים למילים הפחות נפוצות
2. או להשתמש ב-Class Weights (כבר תוקן!)

### **שלב 2: לאמן מחדש עם Class Weights** ⚠️ **חובה**

השינויים דורשים אימון מחדש:

```bash
python scripts/train_model.py \
    --csv Data/Labels/dataset.csv \
    --keypoints-dir Data/Keypoints/rawVideos \
    --output-dir models \
    --batch-size 8 \
    --epochs 200
```

או ב-Colab:
1. לפתוח את `notebooks/SignLanguage_Training.ipynb`
2. להריץ את כל התאים מחדש

**עכשיו המודל ישתמש ב-Class Weights** ויתמקד גם במילים הפחות נפוצות!

---

## 🎯 פתרונות נוספים אם עדיין לא עובד

### **פתרון 1: להוסיף עוד סרטונים** ⭐ **מומלץ ביותר**

**הבעיה**: אם יש פחות מ-20-30 סרטונים למילה, המודל יתקשה ללמוד

**הפתרון**:
1. להוסיף עוד סרטונים למילים הפחות נפוצות
2. לשאוף ל-30-50 סרטונים לכל מילה
3. לוודא שיש מגוון: אנשים שונים, זוויות שונות

**איך לבדוק**:
```bash
python scripts/analyze_dataset.py
```

זה יראה איזה מילים צריכות עוד סרטונים.

### **פתרון 2: Data Augmentation** ⭐ **קל ליישום**

אם אין אפשרות להוסיף עוד סרטונים, אפשר להגדיל את הנתונים עם Augmentation:

1. **Temporal Augmentation**:
   - שינוי מהירות (להאיט/לזרז)
   - הוספת noise קטן

2. **Spatial Augmentation**:
   - שינוי קטן במיקום
   - שינוי קטן בגודל

**איך ליישם**: להוסיף ל-`data_loader.py` בזמן טעינת הנתונים

### **פתרון 3: Oversampling** ⭐ **אפשרי**

להכפיל את הסרטונים של המילים הפחות נפוצות:

1. לקחת את הסרטונים של המילים הפחות נפוצות
2. להכפיל אותם (להעתיק)
3. או להשתמש ב-Augmentation

**זה יעזור לאזן את הנתונים**

### **פתרון 4: Undersampling** ⚠️ **לא מומלץ**

להסיר סרטונים מהמילה הכי נפוצה (HELLO):

- **חסרון**: מאבדים נתונים
- **יתרון**: מאזן את הנתונים
- **המלצה**: רק אם יש הרבה מאוד סרטונים של HELLO (>100)

---

## 📊 איך לבדוק אם זה עובד

### **לאחר אימון מחדש**:

1. **לבדוק את Confusion Matrix**:
   - האם המודל מזהה נכון את כל המילים?
   - או שהוא עדיין מזהה רק HELLO?

2. **לבדוק את Accuracy**:
   - האם ה-Accuracy השתפר?
   - האם ה-Validation Accuracy טוב?

3. **לבדוק את התחזיות**:
   - לנסות כמה סרטונים
   - לבדוק אם המודל מזהה נכון

### **אם עדיין לא עובד**:

1. **לבדוק את הנתונים**:
   ```bash
   python scripts/analyze_dataset.py
   ```
   - כמה סרטונים יש לכל מילה?
   - מה היחס בין המילים?

2. **להוסיף עוד סרטונים**:
   - לפחות 30-50 לכל מילה
   - יותר מגוון

3. **לשנות את Class Weights**:
   - לנסות `class_weight='balanced'` (כבר מוגדר)
   - או לנסות weights מותאמים אישית

---

## 🔍 בדיקות נוספות

### **לבדוק את איכות הנתונים**:

1. **לבדוק אם הסרטונים דומים מדי**:
   - האם כל הסרטונים של אותה מילה נראים אותו דבר?
   - צריך מגוון!

2. **לבדוק אם הסרטונים שונים מדי**:
   - האם הסרטונים של מילים שונות נראים דומים?
   - צריך שהמילים יהיו שונות!

3. **לבדוק את Frame Sampling**:
   - האם Frame Sampling עובד טוב?
   - האם הוא מדלג על ההתחלה כמו שצריך?

---

## 📝 סיכום

**הבעיה**: המודל מזהה רק HELLO כי יש יותר סרטונים של HELLO

**התיקון**: 
1. ✅ Class Weights - המודל עכשיו נותן יותר משקל למילים פחות נפוצות
2. ✅ סקריפט לניתוח - לבדוק את התפלגות הנתונים

**מה לעשות**:
1. ⚠️ להריץ `python scripts/analyze_dataset.py` לבדוק את הנתונים
2. ⚠️ לאמן מחדש עם Class Weights
3. ⚠️ אם עדיין לא עובד - להוסיף עוד סרטונים למילים הפחות נפוצות

**אם עדיין לא עובד אחרי הכל**:
- להוסיף עוד סרטונים (30-50 לכל מילה)
- לוודא שיש מגוון (אנשים שונים, זוויות שונות)
- לבדוק את איכות הנתונים

---

**הכל מוכן!** עכשיו צריך רק לבדוק את הנתונים ולאמן מחדש. 🚀

**שאלות?** תגיד לי אם משהו לא ברור או צריך עזרה!

